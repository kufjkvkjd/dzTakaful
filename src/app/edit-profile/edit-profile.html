<div class="container mt-5">
  <h2 class="text-center mb-4">ุชุนุฏูู ุงูุจุฑููุงูู</h2>

  <button *ngIf="!formVisible" type="button" class="btn btn-secondary w-100" (click)="loadProfile()">๐ฅ ุชุญููู ุจูุงูุงุช ุงูุจุฑููุงูู</button>

  <form *ngIf="formVisible" (ngSubmit)="submit()" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label">ุงูุฏูุฑ:</label>
      <select name="role" [(ngModel)]="role" class="form-select" (change)="onRoleChange($event)">
        <option value="">-- ุงุฎุชุฑ --</option>
        <option value="individual">ุฃูุฑุงุฏ</option>
        <option value="professional">ูููููู</option>
        <option value="entreprise">ูุคุณุณุงุช</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">ุงูุนููุงู:</label>
      <input type="text" name="address" [(ngModel)]="address" class="form-control">
    </div>

    <div class="mb-3">
      <label class="form-label">ุงููุงุชู:</label>
      <input type="text" name="phone" [(ngModel)]="phone" class="form-control">
    </div>

    <div *ngIf="role === 'individual' || role === 'professional'">
      <div class="mb-3">
        <label class="form-label">ุฑูู ุงูุจุทุงูุฉ ุงููุทููุฉ:</label>
        <input type="text" name="national_id_number" [(ngModel)]="national_id_number" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">ุตูุฑุฉ ุงูุจุทุงูุฉ ุงููุทููุฉ:</label>
        <input type="file" (change)="onFileChange($event, 'national_card_image')" class="form-control">
        <button type="button" class="btn btn-outline-secondary mt-2" *ngIf="national_card_image_url" (click)="downloadFile(national_card_image_url)">ุชุญููู ุงููุซููุฉ</button>
      </div>
    </div>

    <div *ngIf="role === 'individual'">
      <div class="mb-3">
        <label class="form-label">ุฑูู ุงูุญุณุงุจ (RIB):</label>
        <input type="text" name="rib" [(ngModel)]="rib" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">ุงูููู ุงูุทุจู:</label>
        <input type="file" (change)="onFileChange($event, 'medical_report')" class="form-control">
        <button type="button" class="btn btn-outline-secondary mt-2" *ngIf="medical_report_url" (click)="downloadFile(medical_report_url)">ุชุญููู ุงููุซููุฉ</button>
      </div>
    </div>

    <div *ngIf="role === 'professional' || role === 'entreprise'">
      <div class="mb-3">
        <label class="form-label">ุงุณู ุงููุคุณุณุฉ:</label>
        <input type="text" name="establishment_name" [(ngModel)]="establishment_name" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู:</label>
        <input type="text" name="nrc" [(ngModel)]="nrc" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">ูุณุฎุฉ ุงูุณุฌู ุงูุชุฌุงุฑู:</label>
        <input type="file" (change)="onFileChange($event, 'commercial_register_copy')" class="form-control">
        <button type="button" class="btn btn-outline-secondary mt-2" *ngIf="commercial_register_copy_url" (click)="downloadFile(commercial_register_copy_url)">ุชุญููู ุงููุซููุฉ</button>
      </div>
    </div>

    <div *ngIf="role === 'entreprise'">
      <div class="mb-3">
        <label class="form-label">ูุซุงุฆู ุฅุซุจุงุช ุงููุดุงุท:</label>
        <input type="file" (change)="onFileChange($event, 'activity_proof_documents')" class="form-control">
        <button type="button" class="btn btn-outline-secondary mt-2" *ngIf="activity_proof_documents_url" (click)="downloadFile(activity_proof_documents_url)">ุชุญููู ุงููุซููุฉ</button>
      </div>
    </div>

    <div *ngIf="showAlert" class="alert alert-{{ alertType }} alert-dismissible fade show text-center mt-3" role="alert">
      {{ alertMessage }}
      <button class="btn-close" (click)="showAlert = false" aria-label="ุฅุบูุงู"></button>
    </div>

    <button type="submit" class="btn btn-primary w-100 mb-2">๐พ ุญูุธ</button>
  </form>
</div>
